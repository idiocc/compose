{
"version":3,
"file":"compile/compose.js",
"lineCount":6,
"mappings":"A;;;;;aAGAA,MAAAC,QAAA,CAAiB,CACf,SCAaC,QAAgB,CAACC,CAAD,CAAa,CAC1C,GAAI,CAACC,KAAAC,QAAA,CAAcF,CAAd,CAAL,CACE,KAAM,KAAIG,SAAJ,CAAc,oCAAd,CAAN,CACF,IAAK,MAAMC,CAAX,GAAiBJ,EAAjB,CACE,GAAiB,UAAjB,EAAI,MAAOI,EAAX,CACE,KAAM,KAAID,SAAJ,CAAc,2CAAd,CAAN,CAGJ,MAAO,CAACE,CAAD,CAAUC,CAAV,CAAA,EAAmB,CAKxBC,QAASA,EAAQ,CAACC,CAAD,CAAI,CACnB,GAAIA,CAAJ,EAASC,CAAT,CAAgB,MAAOC,QAAAC,OAAA,CAAmBC,KAAJ,CAAU,8BAAV,CAAf,CACvBH,EAAA,CAAQD,CACR,KAAIJ,EAAKJ,CAAA,CAAWQ,CAAX,CACLA,EAAJ,EAASR,CAAAa,OAAT,GAA4BT,CAA5B,CAAiCE,CAAjC,CACA,IAAI,CAACF,CAAL,CAAS,MAAOM,QAAAI,QAAA,EAChB,IAAI,CACF,MAAOJ,QAAAI,QAAA,CAAgBV,CAAA,CAAGC,CAAH,CAAYE,CAAAQ,KAAA,CAAc,IAAd,CAAoBP,CAApB,CAAwB,CAAxB,CAAZ,CAAhB,CADL,CAEF,MAAOQ,CAAP,CAAY,CACZ,MAAON,QAAAC,OAAA,CAAeK,CAAf,CADK,CARK,CAHrB,IAAIP,EAAS,EACb,OAAOF,EAAA,CAAS,CAAT,CAHiB,CARgB,CDD3B;",
"sources":["src/depack.js","src/index.js"],
"sourcesContent":["import '../types/externs'\nimport compose from './'\n\nmodule.exports = {\n  '_compose': compose,\n}","/**\n * Compose `middleware` returning a fully valid middleware comprised of all those which are passed.\n * @param {!Array<!Function>} middleware\n */\nexport default function compose(middleware) {\n  if (!Array.isArray(middleware))\n    throw new TypeError('Middleware stack must be an array!')\n  for (const fn of middleware) {\n    if (typeof fn != 'function')\n      throw new TypeError('Middleware must be composed of functions!')\n  }\n\n  return (context, next) => {\n    // last called middleware #\n    let index = -1\n    return dispatch(0)\n\n    function dispatch(i) {\n      if (i <= index) return Promise.reject(new Error('next() called multiple times'))\n      index = i\n      let fn = middleware[i]\n      if (i == middleware.length) fn = next\n      if (!fn) return Promise.resolve()\n      try {\n        return Promise.resolve(fn(context, dispatch.bind(null, i + 1)))\n      } catch (err) {\n        return Promise.reject(err)\n      }\n    }\n  }\n}\n\n/**\n * @license MIT\n * (c) dead-horse\n * https://npmjs.org/koa-compose\n */"],
"names":["module","exports","compose","middleware","Array","isArray","TypeError","fn","context","next","dispatch","i","index","Promise","reject","Error","length","resolve","bind","err"]
}
